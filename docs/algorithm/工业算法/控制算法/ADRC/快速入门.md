# ADRC 快速入门 - 5分钟上手

## 安装

```bash
pip install pyadrc numpy matplotlib
```

## 最简单的例子

复制下面的代码，直接运行就可以看到 ADRC 控制效果：

```python
import numpy as np
import matplotlib.pyplot as plt
from pyadrc import ADRC

# 1. 创建控制器（一阶系统）
controller = ADRC(
    order=1,           # 一阶系统
    delta_t=0.01,      # 采样时间 10ms
    r=50,              # 响应速度
    b0=1.0             # 控制增益
)

# 2. 仿真
current_position = 0.0  # 当前位置
target_position = 10.0  # 目标位置

positions = []
time = []

# 运行 3 秒
for i in range(300):
    t = i * 0.01
    
    # 控制器计算控制量
    control_output = controller.control(target_position, current_position)
    
    # 更新系统（简单的积分）
    current_position += control_output * 0.01
    
    # 记录数据
    time.append(t)
    positions.append(current_position)

# 3. 绘图
plt.figure(figsize=(10, 4))
plt.plot(time, positions, 'b-', label='实际位置', linewidth=2)
plt.axhline(y=target_position, color='r', linestyle='--', label='目标位置')
plt.xlabel('时间 (s)')
plt.ylabel('位置')
plt.title('ADRC 控制效果')
plt.legend()
plt.grid(True)
plt.show()
```

## 就这么简单！

只需要三步：
1. **创建控制器** - `ADRC(order=1, delta_t=0.01, r=50, b0=1.0)`
2. **计算控制量** - `controller.control(目标值, 当前值)`
3. **应用到系统** - 用控制量更新你的系统状态

## 调整参数

只需要记住一个参数：**`r`** (响应速度)

```python
# r = 20  → 响应慢，平滑
# r = 50  → 正常速度（推荐）
# r = 100 → 响应快，可能震荡
```

## 实际应用示例

### 温度控制

```python
from pyadrc import ADRC

# 创建温度控制器
temp_controller = ADRC(order=1, delta_t=1.0, r=30, b0=1.0)

target_temp = 25.0      # 目标温度 25°C
current_temp = 20.0     # 当前温度 20°C

# 每秒循环一次
for second in range(100):
    # 计算需要的加热功率
    heating_power = temp_controller.control(target_temp, current_temp)
    
    # 应用加热功率到系统（这里只是模拟）
    current_temp += heating_power * 0.1  # 简化的温度变化模型
    
    print(f"第 {second} 秒: 当前温度 {current_temp:.2f}°C")
```

### 电机位置控制

```python
from pyadrc import ADRC

# 创建电机控制器
motor_controller = ADRC(order=2, delta_t=0.01, r=50, b0=1.0)

target_angle = 90.0     # 目标角度 90°
current_angle = 0.0     # 当前角度 0°

# 控制循环
for step in range(1000):
    # 计算电机扭矩
    torque = motor_controller.control(target_angle, current_angle)
    
    # 应用扭矩到电机（实际代码中这里会调用电机驱动）
    # motor.set_torque(torque)
    
    # 读取新的角度
    # current_angle = motor.get_angle()
    
    current_angle += torque * 0.001  # 这里只是演示
```

## 常见问题

**Q: 系统震荡怎么办？**  
A: 把 `r` 改小一点，比如从 50 改成 30

**Q: 响应太慢？**  
A: 把 `r` 改大一点，比如从 50 改成 80

**Q: 一阶还是二阶？**  
A: 
- 温度、液位控制 → `order=1` 
- 位置、电机控制 → `order=2`

---

**就这么简单！** 现在你可以把 ADRC 用到你的项目中了。

想了解更多细节？查看 [PyADRC实践教程](./PyADRC实践教程.md)
