"use strict";(self.webpackChunkpanda_blog=self.webpackChunkpanda_blog||[]).push([[6667],{1940:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC/PyADRC\u5b9e\u8df5\u6559\u7a0b","title":"PyADRC \u5b9e\u8df5\u6559\u7a0b","description":"\u524d\u8a00","source":"@site/docs/algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC/PyADRC\u5b9e\u8df5\u6559\u7a0b.md","sourceDirName":"algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC","slug":"/algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC/PyADRC\u5b9e\u8df5\u6559\u7a0b","permalink":"/docusaurus-blog/docs/algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC/PyADRC\u5b9e\u8df5\u6559\u7a0b","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC/PyADRC\u5b9e\u8df5\u6559\u7a0b.md","tags":[],"version":"current","frontMatter":{},"sidebar":"algorithmSidebar","previous":{"title":"ADRC \u81ea\u6297\u6270\u63a7\u5236\u5668\u7b80\u4ecb","permalink":"/docusaurus-blog/docs/algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC/ADRC\u7b80\u4ecb"},"next":{"title":"ADRC \u5feb\u901f\u5165\u95e8 - 5\u5206\u949f\u4e0a\u624b","permalink":"/docusaurus-blog/docs/algorithm/\u5de5\u4e1a\u7b97\u6cd5/\u63a7\u5236\u7b97\u6cd5/ADRC/\u5feb\u901f\u5165\u95e8"}}');var r=l(4848),i=l(8453);const s={},d="PyADRC \u5b9e\u8df5\u6559\u7a0b",o={},c=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u73af\u5883\u51c6\u5907",id:"\u73af\u5883\u51c6\u5907",level:2},{value:"\u5b89\u88c5\u4f9d\u8d56\u5e93",id:"\u5b89\u88c5\u4f9d\u8d56\u5e93",level:3},{value:"\u57fa\u7840\u793a\u4f8b\uff1a\u4e00\u9636\u7cfb\u7edf\u63a7\u5236",id:"\u57fa\u7840\u793a\u4f8b\u4e00\u9636\u7cfb\u7edf\u63a7\u5236",level:2},{value:"\u793a\u4f8b 1\uff1a\u7b80\u5355\u7684\u4f4d\u7f6e\u8ddf\u8e2a",id:"\u793a\u4f8b-1\u7b80\u5355\u7684\u4f4d\u7f6e\u8ddf\u8e2a",level:3},{value:"\u8fd0\u884c\u7ed3\u679c\u5206\u6790",id:"\u8fd0\u884c\u7ed3\u679c\u5206\u6790",level:3},{value:"\u8fdb\u9636\u793a\u4f8b\uff1a\u4e8c\u9636\u7cfb\u7edf\u63a7\u5236",id:"\u8fdb\u9636\u793a\u4f8b\u4e8c\u9636\u7cfb\u7edf\u63a7\u5236",level:2},{value:"\u793a\u4f8b 2\uff1a\u7535\u673a\u4f4d\u7f6e\u63a7\u5236",id:"\u793a\u4f8b-2\u7535\u673a\u4f4d\u7f6e\u63a7\u5236",level:3},{value:"ADRC \u53c2\u6570\u8c03\u6574\u6307\u5357",id:"adrc-\u53c2\u6570\u8c03\u6574\u6307\u5357",level:2},{value:"\u5173\u952e\u53c2\u6570\u8bf4\u660e",id:"\u5173\u952e\u53c2\u6570\u8bf4\u660e",level:3},{value:"\u53c2\u6570\u8c03\u6574\u6b65\u9aa4",id:"\u53c2\u6570\u8c03\u6574\u6b65\u9aa4",level:3},{value:"\u5b9e\u8df5\u7ec3\u4e60\u4ee3\u7801",id:"\u5b9e\u8df5\u7ec3\u4e60\u4ee3\u7801",level:3},{value:"\u4e0e PID \u5bf9\u6bd4\u5b9e\u9a8c",id:"\u4e0e-pid-\u5bf9\u6bd4\u5b9e\u9a8c",level:2},{value:"\u5b66\u4e60\u5efa\u8bae",id:"\u5b66\u4e60\u5efa\u8bae",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"Q1: \u63a7\u5236\u9707\u8361\u600e\u4e48\u529e\uff1f",id:"q1-\u63a7\u5236\u9707\u8361\u600e\u4e48\u529e",level:3},{value:"Q2: \u54cd\u5e94\u592a\u6162\uff1f",id:"q2-\u54cd\u5e94\u592a\u6162",level:3},{value:"Q3: \u6709\u7a33\u6001\u8bef\u5dee\uff1f",id:"q3-\u6709\u7a33\u6001\u8bef\u5dee",level:3},{value:"\u4e0b\u4e00\u6b65\u5b66\u4e60",id:"\u4e0b\u4e00\u6b65\u5b66\u4e60",level:2}];function p(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"pyadrc-\u5b9e\u8df5\u6559\u7a0b",children:"PyADRC \u5b9e\u8df5\u6559\u7a0b"})}),"\n",(0,r.jsx)(e.h2,{id:"\u524d\u8a00",children:"\u524d\u8a00"}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u6559\u7a0b\u901a\u8fc7 Python \u7684 pyadrc \u5e93\uff0c\u8ba9\u4f60\u5728\u5b9e\u9645\u7f16\u7a0b\u4e2d\u7406\u89e3 ADRC \u7684\u5de5\u4f5c\u539f\u7406\u548c\u5e94\u7528\u65b9\u6cd5\u3002\u901a\u8fc7\u8fd0\u884c\u4ee3\u7801\u3001\u8c03\u6574\u53c2\u6570\u3001\u89c2\u5bdf\u7ed3\u679c\uff0c\u4f60\u5c06\u66f4\u76f4\u89c2\u5730\u638c\u63e1 ADRC \u63a7\u5236\u5668\u7684\u7279\u6027\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u73af\u5883\u51c6\u5907",children:"\u73af\u5883\u51c6\u5907"}),"\n",(0,r.jsx)(e.h3,{id:"\u5b89\u88c5\u4f9d\u8d56\u5e93",children:"\u5b89\u88c5\u4f9d\u8d56\u5e93"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5 pyadrc \u5e93\npip install pyadrc\n\n# \u5b89\u88c5\u7ed8\u56fe\u548c\u6570\u503c\u8ba1\u7b97\u5e93\npip install numpy matplotlib scipy\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u57fa\u7840\u793a\u4f8b\u4e00\u9636\u7cfb\u7edf\u63a7\u5236",children:"\u57fa\u7840\u793a\u4f8b\uff1a\u4e00\u9636\u7cfb\u7edf\u63a7\u5236"}),"\n",(0,r.jsx)(e.h3,{id:"\u793a\u4f8b-1\u7b80\u5355\u7684\u4f4d\u7f6e\u8ddf\u8e2a",children:"\u793a\u4f8b 1\uff1a\u7b80\u5355\u7684\u4f4d\u7f6e\u8ddf\u8e2a"}),"\n",(0,r.jsx)(e.p,{children:"\u8ba9\u6211\u4eec\u4ece\u6700\u7b80\u5355\u7684\u4f8b\u5b50\u5f00\u59cb\uff0c\u63a7\u5236\u4e00\u4e2a\u4e00\u9636\u7cfb\u7edf\u8ddf\u8e2a\u76ee\u6807\u4f4d\u7f6e\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"import numpy as np\nimport matplotlib.pyplot as plt\nfrom pyadrc import ADRC\n\n# ============ \u6b65\u9aa4 1\uff1a\u5b9a\u4e49\u88ab\u63a7\u7cfb\u7edf ============\ndef system_dynamics(x, u, t):\n    \"\"\"\n    \u4e00\u9636\u7cfb\u7edf\u52a8\u6001\u6a21\u578b\n    dx/dt = -0.5*x + u + disturbance\n    \n    \u53c2\u6570:\n        x: \u5f53\u524d\u72b6\u6001\uff08\u4f4d\u7f6e\uff09\n        u: \u63a7\u5236\u8f93\u5165\n        t: \u5f53\u524d\u65f6\u95f4\n    \u8fd4\u56de:\n        dx: \u72b6\u6001\u53d8\u5316\u7387\n    \"\"\"\n    # \u6dfb\u52a0\u5916\u90e8\u6270\u52a8\uff08\u5728 t=5s \u65f6\u7a81\u7136\u52a0\u5165\uff09\n    disturbance = 2.0 if t > 5 else 0.0\n    \n    # \u7cfb\u7edf\u52a8\u6001\uff1a\u5e26\u6709\u8870\u51cf\u548c\u6270\u52a8\n    dx = -0.5 * x + u + disturbance\n    return dx\n\n\n# ============ \u6b65\u9aa4 2\uff1a\u521b\u5efa ADRC \u63a7\u5236\u5668 ============\n# \u521b\u5efa\u4e00\u9636 ADRC \u63a7\u5236\u5668\nadrc = ADRC(\n    order=1,           # \u7cfb\u7edf\u9636\u6570\uff081\u9636\u7cfb\u7edf\uff09\n    delta_t=0.01,      # \u91c7\u6837\u65f6\u95f4\n    r=100,             # \u8ddf\u8e2a\u901f\u5ea6\u56e0\u5b50\uff08\u8d8a\u5927\u54cd\u5e94\u8d8a\u5feb\uff0c\u4f46\u53ef\u80fd\u632f\u8361\uff09\n    h=0.01,            # ESO \u6ee4\u6ce2\u53c2\u6570\n    b0=1.0,            # \u63a7\u5236\u589e\u76ca\u4f30\u8ba1\u503c\n    k_eso=[3, 3],      # ESO \u89c2\u6d4b\u5668\u589e\u76ca [beta1, beta2]\n    k_nlsef=[5]        # \u975e\u7ebf\u6027\u53cd\u9988\u589e\u76ca\n)\n\n\n# ============ \u6b65\u9aa4 3\uff1a\u4eff\u771f\u8bbe\u7f6e ============\ndt = 0.01              # \u4eff\u771f\u6b65\u957f\nt_total = 10.0         # \u603b\u4eff\u771f\u65f6\u95f4\nsteps = int(t_total / dt)\n\n# \u521d\u59cb\u5316\u6570\u7ec4\u5b58\u50a8\u7ed3\u679c\ntime = np.zeros(steps)\nreference = np.zeros(steps)  # \u76ee\u6807\u503c\nactual = np.zeros(steps)     # \u5b9e\u9645\u503c\ncontrol = np.zeros(steps)    # \u63a7\u5236\u91cf\ndisturbance_record = np.zeros(steps)  # \u6270\u52a8\u4f30\u8ba1\n\n# \u521d\u59cb\u72b6\u6001\nx = 0.0  # \u521d\u59cb\u4f4d\u7f6e\n\n\n# ============ \u6b65\u9aa4 4\uff1a\u8fd0\u884c\u4eff\u771f ============\nfor i in range(steps):\n    t = i * dt\n    time[i] = t\n    \n    # \u8bbe\u5b9a\u53c2\u8003\u8f68\u8ff9\uff08\u76ee\u6807\u503c\uff09\n    if t < 2:\n        r = 1.0  # \u524d 2 \u79d2\u76ee\u6807\u4e3a 1\n    elif t < 7:\n        r = 3.0  # 2-7 \u79d2\u76ee\u6807\u4e3a 3\n    else:\n        r = 2.0  # 7 \u79d2\u540e\u76ee\u6807\u4e3a 2\n    \n    reference[i] = r\n    \n    # ADRC \u63a7\u5236\u5668\u8ba1\u7b97\u63a7\u5236\u91cf\n    # \u8f93\u5165\uff1a\u76ee\u6807\u503c r \u548c\u5f53\u524d\u72b6\u6001 x\n    u = adrc.control(r, x)\n    \n    # \u9650\u5236\u63a7\u5236\u91cf\u5e45\u503c\uff08\u6a21\u62df\u6267\u884c\u5668\u9971\u548c\uff09\n    u = np.clip(u, -10, 10)\n    control[i] = u\n    \n    # \u8bb0\u5f55 ESO \u4f30\u8ba1\u7684\u6270\u52a8\n    disturbance_record[i] = adrc.z[1] if len(adrc.z) > 1 else 0\n    \n    # \u7cfb\u7edf\u52a8\u6001\u6f14\u5316\uff08\u6b27\u62c9\u6cd5\u6570\u503c\u79ef\u5206\uff09\n    dx = system_dynamics(x, u, t)\n    x = x + dx * dt\n    \n    actual[i] = x\n\n\n# ============ \u6b65\u9aa4 5\uff1a\u7ed3\u679c\u53ef\u89c6\u5316 ============\nplt.figure(figsize=(12, 8))\n\n# \u5b50\u56fe 1\uff1a\u4f4d\u7f6e\u8ddf\u8e2a\u6548\u679c\nplt.subplot(3, 1, 1)\nplt.plot(time, reference, 'r--', label='\u76ee\u6807\u4f4d\u7f6e', linewidth=2)\nplt.plot(time, actual, 'b-', label='\u5b9e\u9645\u4f4d\u7f6e', linewidth=1.5)\nplt.ylabel('\u4f4d\u7f6e')\nplt.legend()\nplt.grid(True)\nplt.title('ADRC \u63a7\u5236\u6548\u679c')\n\n# \u5b50\u56fe 2\uff1a\u63a7\u5236\u91cf\nplt.subplot(3, 1, 2)\nplt.plot(time, control, 'g-', linewidth=1.5)\nplt.ylabel('\u63a7\u5236\u91cf u')\nplt.grid(True)\n\n# \u5b50\u56fe 3\uff1a\u6270\u52a8\u4f30\u8ba1\nplt.subplot(3, 1, 3)\nplt.plot(time, disturbance_record, 'm-', label='ESO \u4f30\u8ba1\u7684\u603b\u6270\u52a8', linewidth=1.5)\nplt.axvline(x=5, color='r', linestyle='--', label='\u6270\u52a8\u52a0\u5165\u65f6\u523b')\nplt.ylabel('\u6270\u52a8\u4f30\u8ba1')\nplt.xlabel('\u65f6\u95f4 (s)')\nplt.legend()\nplt.grid(True)\n\nplt.tight_layout()\nplt.savefig('adrc_control_result.png', dpi=300)\nplt.show()\n\nprint(\"\u4eff\u771f\u5b8c\u6210\uff01\")\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u8fd0\u884c\u7ed3\u679c\u5206\u6790",children:"\u8fd0\u884c\u7ed3\u679c\u5206\u6790"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd0\u884c\u4e0a\u8ff0\u4ee3\u7801\u540e\uff0c\u4f60\u4f1a\u770b\u5230\u4e09\u4e2a\u5b50\u56fe\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4f4d\u7f6e\u8ddf\u8e2a\u6548\u679c\u56fe"}),"\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u84dd\u7ebf\uff08\u5b9e\u9645\u4f4d\u7f6e\uff09\u5feb\u901f\u8ddf\u8e2a\u7ea2\u8272\u865a\u7ebf\uff08\u76ee\u6807\u4f4d\u7f6e\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u5373\u4f7f\u5728 t=5s \u52a0\u5165\u6270\u52a8\uff0c\u7cfb\u7edf\u4e5f\u80fd\u5feb\u901f\u6062\u590d\u8ddf\u8e2a"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u63a7\u5236\u91cf\u56fe"}),"\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u663e\u793a ADRC \u8ba1\u7b97\u7684\u63a7\u5236\u8f93\u5165"}),"\n",(0,r.jsx)(e.li,{children:"\u5728\u76ee\u6807\u53d8\u5316\u548c\u6270\u52a8\u51fa\u73b0\u65f6\uff0c\u63a7\u5236\u91cf\u4f1a\u76f8\u5e94\u8c03\u6574"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6270\u52a8\u4f30\u8ba1\u56fe"}),"\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"ESO \u80fd\u591f\u5b9e\u65f6\u4f30\u8ba1\u51fa\u7cfb\u7edf\u53d7\u5230\u7684\u603b\u6270\u52a8"}),"\n",(0,r.jsx)(e.li,{children:"\u5728 t=5s \u6270\u52a8\u52a0\u5165\u540e\uff0c\u4f30\u8ba1\u503c\u8fc5\u901f\u8ddf\u8e2a\u5230\u5b9e\u9645\u6270\u52a8"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u8fdb\u9636\u793a\u4f8b\u4e8c\u9636\u7cfb\u7edf\u63a7\u5236",children:"\u8fdb\u9636\u793a\u4f8b\uff1a\u4e8c\u9636\u7cfb\u7edf\u63a7\u5236"}),"\n",(0,r.jsx)(e.h3,{id:"\u793a\u4f8b-2\u7535\u673a\u4f4d\u7f6e\u63a7\u5236",children:"\u793a\u4f8b 2\uff1a\u7535\u673a\u4f4d\u7f6e\u63a7\u5236"}),"\n",(0,r.jsx)(e.p,{children:"\u8ba9\u6211\u4eec\u63a7\u5236\u4e00\u4e2a\u4e8c\u9636\u7cfb\u7edf\uff08\u7c7b\u4f3c\u7535\u673a\u4f4d\u7f6e\u63a7\u5236\uff09\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"import numpy as np\nimport matplotlib.pyplot as plt\nfrom pyadrc import ADRC\n\n# ============ \u5b9a\u4e49\u4e8c\u9636\u7cfb\u7edf\uff08\u7535\u673a\u6a21\u578b\uff09============\nclass MotorSystem:\n    \"\"\"\n    \u7b80\u5316\u7684\u7535\u673a\u4f4d\u7f6e\u63a7\u5236\u6a21\u578b\n    d\xb2\u03b8/dt\xb2 = -c\u2081*d\u03b8/dt - c\u2082*\u03b8 + b*u + d(t)\n    \u5176\u4e2d\uff1a\u03b8 \u662f\u89d2\u5ea6\uff0cu \u662f\u63a7\u5236\u8f93\u5165\uff0cd(t) \u662f\u6270\u52a8\n    \"\"\"\n    def __init__(self):\n        self.position = 0.0      # \u89d2\u5ea6 \u03b8\n        self.velocity = 0.0      # \u89d2\u901f\u5ea6 d\u03b8/dt\n        self.c1 = 0.5            # \u963b\u5c3c\u7cfb\u6570\n        self.c2 = 0.3            # \u521a\u5ea6\u7cfb\u6570\n        self.b = 1.0             # \u63a7\u5236\u589e\u76ca\n        self.J = 1.0             # \u8f6c\u52a8\u60ef\u91cf\n    \n    def update(self, u, dt, t):\n        \"\"\"\n        \u66f4\u65b0\u7535\u673a\u72b6\u6001\n        \n        \u53c2\u6570:\n            u: \u63a7\u5236\u529b\u77e9\n            dt: \u65f6\u95f4\u6b65\u957f\n            t: \u5f53\u524d\u65f6\u95f4\n        \"\"\"\n        # \u6a21\u62df\u8d1f\u8f7d\u6270\u52a8\uff08\u5468\u671f\u6027\u53d8\u5316\uff09\n        disturbance = 0.5 * np.sin(0.5 * t) if t > 3 else 0\n        \n        # \u4e8c\u9636\u52a8\u6001\u65b9\u7a0b\n        acceleration = (-self.c1 * self.velocity - \n                       self.c2 * self.position + \n                       self.b * u + disturbance) / self.J\n        \n        # \u6570\u503c\u79ef\u5206\u66f4\u65b0\u72b6\u6001\n        self.velocity += acceleration * dt\n        self.position += self.velocity * dt\n        \n        return self.position, self.velocity\n\n\n# ============ \u521b\u5efa\u4e8c\u9636 ADRC \u63a7\u5236\u5668 ============\nadrc = ADRC(\n    order=2,              # \u4e8c\u9636\u7cfb\u7edf\n    delta_t=0.01,         # \u91c7\u6837\u65f6\u95f4\n    r=50,                 # \u8ddf\u8e2a\u901f\u5ea6\u56e0\u5b50\n    h=0.1,                # \u6ee4\u6ce2\u53c2\u6570\n    b0=1.0,               # \u63a7\u5236\u589e\u76ca\u4f30\u8ba1\n    k_eso=[100, 300, 500], # ESO \u589e\u76ca [beta1, beta2, beta3]\n    k_nlsef=[10, 5]       # \u975e\u7ebf\u6027\u53cd\u9988\u589e\u76ca [\u4f4d\u7f6e\u589e\u76ca, \u901f\u5ea6\u589e\u76ca]\n)\n\n\n# ============ \u4eff\u771f\u53c2\u6570\u8bbe\u7f6e ============\ndt = 0.01\nt_total = 15.0\nsteps = int(t_total / dt)\n\n# \u521d\u59cb\u5316\nmotor = MotorSystem()\ntime = np.zeros(steps)\nreference = np.zeros(steps)\nposition = np.zeros(steps)\nvelocity = np.zeros(steps)\ncontrol = np.zeros(steps)\ntracking_error = np.zeros(steps)\n\n\n# ============ \u8fd0\u884c\u4eff\u771f ============\nfor i in range(steps):\n    t = i * dt\n    time[i] = t\n    \n    # \u751f\u6210\u53c2\u8003\u8f68\u8ff9\uff08\u9636\u8dc3 + \u659c\u5761 + \u6b63\u5f26\uff09\n    if t < 3:\n        r = 0\n    elif t < 8:\n        r = 2.0  # \u9636\u8dc3\u5230 2\n    else:\n        r = 2.0 + 1.0 * np.sin(0.5 * t)  # \u6b63\u5f26\u6ce2\u52a8\n    \n    reference[i] = r\n    \n    # ADRC \u8ba1\u7b97\u63a7\u5236\u91cf\uff08\u53ea\u9700\u8981\u4f4d\u7f6e\u6d4b\u91cf\uff09\n    u = adrc.control(r, motor.position)\n    \n    # \u9650\u5236\u63a7\u5236\u529b\u77e9\n    u = np.clip(u, -20, 20)\n    control[i] = u\n    \n    # \u66f4\u65b0\u7535\u673a\u72b6\u6001\n    pos, vel = motor.update(u, dt, t)\n    position[i] = pos\n    velocity[i] = vel\n    tracking_error[i] = r - pos\n\n\n# ============ \u7ed8\u5236\u7ed3\u679c ============\nplt.figure(figsize=(14, 10))\n\n# \u5b50\u56fe 1\uff1a\u4f4d\u7f6e\u8ddf\u8e2a\nplt.subplot(4, 1, 1)\nplt.plot(time, reference, 'r--', label='\u76ee\u6807\u4f4d\u7f6e', linewidth=2)\nplt.plot(time, position, 'b-', label='\u5b9e\u9645\u4f4d\u7f6e', linewidth=1.5)\nplt.ylabel('\u89d2\u5ea6 (rad)')\nplt.legend(loc='upper left')\nplt.grid(True)\nplt.title('\u4e8c\u9636\u7cfb\u7edf ADRC \u63a7\u5236\uff08\u7535\u673a\u4f4d\u7f6e\u63a7\u5236\uff09')\n\n# \u5b50\u56fe 2\uff1a\u8ddf\u8e2a\u8bef\u5dee\nplt.subplot(4, 1, 2)\nplt.plot(time, tracking_error, 'r-', linewidth=1.5)\nplt.ylabel('\u8ddf\u8e2a\u8bef\u5dee (rad)')\nplt.grid(True)\nplt.axhline(y=0, color='k', linestyle='--', alpha=0.3)\n\n# \u5b50\u56fe 3\uff1a\u901f\u5ea6\nplt.subplot(4, 1, 3)\nplt.plot(time, velocity, 'g-', linewidth=1.5)\nplt.ylabel('\u89d2\u901f\u5ea6 (rad/s)')\nplt.grid(True)\n\n# \u5b50\u56fe 4\uff1a\u63a7\u5236\u91cf\nplt.subplot(4, 1, 4)\nplt.plot(time, control, 'm-', linewidth=1.5)\nplt.ylabel('\u63a7\u5236\u529b\u77e9')\nplt.xlabel('\u65f6\u95f4 (s)')\nplt.grid(True)\n\nplt.tight_layout()\nplt.savefig('adrc_motor_control.png', dpi=300)\nplt.show()\n\nprint(f\"\u6700\u5927\u8ddf\u8e2a\u8bef\u5dee: {np.max(np.abs(tracking_error)):.4f} rad\")\nprint(f\"\u7a33\u6001\u8bef\u5dee(\u6700\u540e1\u79d2): {np.mean(np.abs(tracking_error[-100:])):.4f} rad\")\n"})}),"\n",(0,r.jsx)(e.h2,{id:"adrc-\u53c2\u6570\u8c03\u6574\u6307\u5357",children:"ADRC \u53c2\u6570\u8c03\u6574\u6307\u5357"}),"\n",(0,r.jsx)(e.h3,{id:"\u5173\u952e\u53c2\u6570\u8bf4\u660e",children:"\u5173\u952e\u53c2\u6570\u8bf4\u660e"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u53c2\u6570"}),(0,r.jsx)(e.th,{children:"\u4f5c\u7528"}),(0,r.jsx)(e.th,{children:"\u8c03\u6574\u5efa\u8bae"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"r"})}),(0,r.jsx)(e.td,{children:"\u8ddf\u8e2a\u901f\u5ea6"}),(0,r.jsx)(e.td,{children:"\u589e\u5927\u52a0\u5feb\u54cd\u5e94\uff0c\u4f46\u53ef\u80fd\u632f\u8361\uff1b\u5efa\u8bae\u4ece\u5c0f\u5230\u5927\u8c03\u6574"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"h"})}),(0,r.jsx)(e.td,{children:"TD \u6ee4\u6ce2\u7cfb\u6570"}),(0,r.jsx)(e.td,{children:"\u4e00\u822c\u8bbe\u4e3a dt \u7684 1-10 \u500d"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"b0"})}),(0,r.jsx)(e.td,{children:"\u63a7\u5236\u589e\u76ca\u4f30\u8ba1"}),(0,r.jsx)(e.td,{children:"\u5c3d\u91cf\u51c6\u786e\u4f30\u8ba1\uff0c\u5f71\u54cd\u63a7\u5236\u7cbe\u5ea6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"k_eso"})}),(0,r.jsx)(e.td,{children:"ESO \u89c2\u6d4b\u5668\u589e\u76ca"}),(0,r.jsx)(e.td,{children:"\u589e\u5927\u63d0\u9ad8\u89c2\u6d4b\u901f\u5ea6\uff0c\u4f46\u5bf9\u566a\u58f0\u654f\u611f"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"k_nlsef"})}),(0,r.jsx)(e.td,{children:"\u53cd\u9988\u589e\u76ca"}),(0,r.jsx)(e.td,{children:"\u589e\u5927\u63d0\u9ad8\u63a7\u5236\u521a\u5ea6\uff0c\u7c7b\u4f3c PID \u7684\u6bd4\u4f8b\u589e\u76ca"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"\u53c2\u6570\u8c03\u6574\u6b65\u9aa4",children:"\u53c2\u6570\u8c03\u6574\u6b65\u9aa4"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["\u5148\u8c03 ",(0,r.jsx)(e.code,{children:"b0"})]}),"\uff1a\u6839\u636e\u7cfb\u7edf\u7279\u6027\u4f30\u8ba1\u63a7\u5236\u589e\u76ca"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["\u518d\u8c03 ",(0,r.jsx)(e.code,{children:"r"})]}),"\uff1a\u4ece\u5c0f\u5f00\u59cb\uff0c\u9010\u6e10\u589e\u5927\u76f4\u5230\u54cd\u5e94\u6ee1\u610f"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["\u8c03\u6574 ",(0,r.jsx)(e.code,{children:"k_eso"})]}),"\uff1a\u89c2\u5bdf\u6270\u52a8\u4f30\u8ba1\u6548\u679c\uff0c\u786e\u4fdd ESO \u5feb\u901f\u6536\u655b"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["\u5fae\u8c03 ",(0,r.jsx)(e.code,{children:"k_nlsef"})]}),"\uff1a\u4f18\u5316\u7a33\u6001\u6027\u80fd\u548c\u6297\u6270\u80fd\u529b"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5b9e\u8df5\u7ec3\u4e60\u4ee3\u7801",children:"\u5b9e\u8df5\u7ec3\u4e60\u4ee3\u7801"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# \u4ea4\u4e92\u5f0f\u53c2\u6570\u8c03\u6574\u5b9e\u9a8c\ndef experiment_with_parameters():\n    \"\"\"\n    \u5c1d\u8bd5\u4e0d\u540c\u7684\u53c2\u6570\u7ec4\u5408\uff0c\u89c2\u5bdf\u63a7\u5236\u6548\u679c\n    \"\"\"\n    # \u53c2\u6570\u7ec4\u5408\u5217\u8868\n    param_sets = [\n        {'r': 20, 'k_eso': [50, 100, 200], 'label': '\u4fdd\u5b88\u53c2\u6570'},\n        {'r': 100, 'k_eso': [100, 300, 500], 'label': '\u6fc0\u8fdb\u53c2\u6570'},\n        {'r': 50, 'k_eso': [100, 300, 500], 'label': '\u5e73\u8861\u53c2\u6570'},\n    ]\n    \n    plt.figure(figsize=(12, 6))\n    \n    for params in param_sets:\n        # \u521b\u5efa\u63a7\u5236\u5668\n        adrc = ADRC(\n            order=2,\n            delta_t=0.01,\n            r=params['r'],\n            h=0.1,\n            b0=1.0,\n            k_eso=params['k_eso'],\n            k_nlsef=[10, 5]\n        )\n        \n        # \u7b80\u5355\u4eff\u771f\n        motor = MotorSystem()\n        time_array = []\n        pos_array = []\n        \n        for i in range(500):\n            t = i * 0.01\n            r = 2.0 if t > 0.5 else 0  # \u9636\u8dc3\u76ee\u6807\n            u = adrc.control(r, motor.position)\n            u = np.clip(u, -20, 20)\n            motor.update(u, 0.01, t)\n            \n            time_array.append(t)\n            pos_array.append(motor.position)\n        \n        # \u7ed8\u5236\u7ed3\u679c\n        plt.plot(time_array, pos_array, label=params['label'], linewidth=2)\n    \n    plt.axhline(y=2.0, color='r', linestyle='--', label='\u76ee\u6807\u503c')\n    plt.xlabel('\u65f6\u95f4 (s)')\n    plt.ylabel('\u4f4d\u7f6e')\n    plt.title('\u4e0d\u540c\u53c2\u6570\u7ec4\u5408\u7684\u63a7\u5236\u6548\u679c\u5bf9\u6bd4')\n    plt.legend()\n    plt.grid(True)\n    plt.show()\n\n# \u8fd0\u884c\u5b9e\u9a8c\nexperiment_with_parameters()\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u4e0e-pid-\u5bf9\u6bd4\u5b9e\u9a8c",children:"\u4e0e PID \u5bf9\u6bd4\u5b9e\u9a8c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"def compare_adrc_pid():\n    \"\"\"\n    \u5bf9\u6bd4 ADRC \u548c PID \u5728\u76f8\u540c\u7cfb\u7edf\u4e0a\u7684\u63a7\u5236\u6548\u679c\n    \"\"\"\n    import matplotlib.pyplot as plt\n    \n    # ADRC \u63a7\u5236\u5668\n    adrc = ADRC(order=2, delta_t=0.01, r=50, h=0.1, b0=1.0,\n                k_eso=[100, 300, 500], k_nlsef=[10, 5])\n    \n    # \u7b80\u5355 PID \u63a7\u5236\u5668\n    class SimplePID:\n        def __init__(self, kp, ki, kd, dt):\n            self.kp, self.ki, self.kd = kp, ki, kd\n            self.dt = dt\n            self.integral = 0\n            self.prev_error = 0\n        \n        def control(self, setpoint, measurement):\n            error = setpoint - measurement\n            self.integral += error * self.dt\n            derivative = (error - self.prev_error) / self.dt\n            self.prev_error = error\n            return self.kp * error + self.ki * self.integral + self.kd * derivative\n    \n    pid = SimplePID(kp=8, ki=2, kd=3, dt=0.01)\n    \n    # \u4eff\u771f\n    dt, t_total = 0.01, 10.0\n    steps = int(t_total / dt)\n    \n    # ADRC \u4eff\u771f\n    motor_adrc = MotorSystem()\n    pos_adrc = []\n    for i in range(steps):\n        t = i * dt\n        r = 2.0 if t > 1 else 0\n        u = adrc.control(r, motor_adrc.position)\n        u = np.clip(u, -20, 20)\n        motor_adrc.update(u, dt, t)\n        pos_adrc.append(motor_adrc.position)\n    \n    # PID \u4eff\u771f\n    motor_pid = MotorSystem()\n    pos_pid = []\n    for i in range(steps):\n        t = i * dt\n        r = 2.0 if t > 1 else 0\n        u = pid.control(r, motor_pid.position)\n        u = np.clip(u, -20, 20)\n        motor_pid.update(u, dt, t)\n        pos_pid.append(motor_pid.position)\n    \n    # \u7ed8\u56fe\u5bf9\u6bd4\n    time = np.arange(0, t_total, dt)\n    plt.figure(figsize=(10, 6))\n    plt.plot(time, [2.0 if t > 1 else 0 for t in time], \n             'r--', label='\u76ee\u6807', linewidth=2)\n    plt.plot(time, pos_adrc, 'b-', label='ADRC', linewidth=1.5)\n    plt.plot(time, pos_pid, 'g-', label='PID', linewidth=1.5)\n    plt.xlabel('\u65f6\u95f4 (s)')\n    plt.ylabel('\u4f4d\u7f6e')\n    plt.title('ADRC vs PID \u63a7\u5236\u6548\u679c\u5bf9\u6bd4')\n    plt.legend()\n    plt.grid(True)\n    plt.show()\n\n# \u8fd0\u884c\u5bf9\u6bd4\u5b9e\u9a8c\ncompare_adrc_pid()\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b66\u4e60\u5efa\u8bae",children:"\u5b66\u4e60\u5efa\u8bae"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u4ece\u7b80\u5355\u5f00\u59cb"}),"\uff1a\u5148\u8fd0\u884c\u4e00\u9636\u7cfb\u7edf\u793a\u4f8b\uff0c\u7406\u89e3\u57fa\u672c\u6d41\u7a0b"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u89c2\u5bdf ESO"}),"\uff1a\u91cd\u70b9\u5173\u6ce8\u6270\u52a8\u4f30\u8ba1\uff0c\u8fd9\u662f ADRC \u7684\u6838\u5fc3"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u8c03\u6574\u53c2\u6570"}),"\uff1a\u4eb2\u624b\u4fee\u6539\u53c2\u6570\uff0c\u89c2\u5bdf\u63a7\u5236\u6548\u679c\u7684\u53d8\u5316"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u6dfb\u52a0\u6270\u52a8"}),"\uff1a\u5c1d\u8bd5\u6dfb\u52a0\u4e0d\u540c\u7c7b\u578b\u7684\u6270\u52a8\uff0c\u6d4b\u8bd5\u6297\u6270\u80fd\u529b"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5bf9\u6bd4\u5b9e\u9a8c"}),"\uff1a\u4e0e PID \u5bf9\u6bd4\uff0c\u4f53\u4f1a ADRC \u7684\u4f18\u52bf"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q1-\u63a7\u5236\u9707\u8361\u600e\u4e48\u529e",children:"Q1: \u63a7\u5236\u9707\u8361\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u51cf\u5c0f ",(0,r.jsx)(e.code,{children:"r"})," \u503c\uff0c\u964d\u4f4e\u8ddf\u8e2a\u901f\u5ea6"]}),"\n",(0,r.jsxs)(e.li,{children:["\u51cf\u5c0f ",(0,r.jsx)(e.code,{children:"k_nlsef"})," \u589e\u76ca"]}),"\n",(0,r.jsxs)(e.li,{children:["\u589e\u5927\u6ee4\u6ce2\u53c2\u6570 ",(0,r.jsx)(e.code,{children:"h"})]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"q2-\u54cd\u5e94\u592a\u6162",children:"Q2: \u54cd\u5e94\u592a\u6162\uff1f"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u589e\u5927 ",(0,r.jsx)(e.code,{children:"r"})," \u503c"]}),"\n",(0,r.jsxs)(e.li,{children:["\u589e\u5927 ",(0,r.jsx)(e.code,{children:"k_eso"})," \u589e\u76ca\uff08\u4f46\u4e0d\u8981\u8fc7\u5927\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:["\u68c0\u67e5 ",(0,r.jsx)(e.code,{children:"b0"})," \u662f\u5426\u4f30\u8ba1\u51c6\u786e"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"q3-\u6709\u7a33\u6001\u8bef\u5dee",children:"Q3: \u6709\u7a33\u6001\u8bef\u5dee\uff1f"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u68c0\u67e5 ",(0,r.jsx)(e.code,{children:"b0"})," \u4f30\u8ba1\u503c\u662f\u5426\u51c6\u786e"]}),"\n",(0,r.jsxs)(e.li,{children:["\u9002\u5f53\u589e\u5927 ",(0,r.jsx)(e.code,{children:"k_eso"})," \u7684\u7b2c\u4e00\u4e2a\u5143\u7d20"]}),"\n",(0,r.jsx)(e.li,{children:"\u786e\u8ba4\u7cfb\u7edf\u6a21\u578b\u9636\u6570\u662f\u5426\u6b63\u786e"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4e0b\u4e00\u6b65\u5b66\u4e60",children:"\u4e0b\u4e00\u6b65\u5b66\u4e60"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6df1\u5165\u7406\u89e3 ESO\uff08\u6269\u5f20\u72b6\u6001\u89c2\u6d4b\u5668\uff09\u7684\u6570\u5b66\u539f\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u5b66\u4e60 ADRC \u53c2\u6570\u81ea\u6574\u5b9a\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.li,{children:"\u7814\u7a76\u7ebf\u6027 ADRC\uff08LADRC\uff09\u7684\u7b80\u5316\u5b9e\u73b0"}),"\n",(0,r.jsx)(e.li,{children:"\u5e94\u7528\u5230\u5b9e\u9645\u786c\u4ef6\u7cfb\u7edf\uff08\u5982 Arduino\u3001\u6811\u8393\u6d3e\uff09"}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u63d0\u793a"}),"\uff1a\u5efa\u8bae\u5c06\u4ee5\u4e0a\u4ee3\u7801\u4fdd\u5b58\u4e3a ",(0,r.jsx)(e.code,{children:".py"})," \u6587\u4ef6\uff0c\u5728 Jupyter Notebook \u6216 Python IDE \u4e2d\u9010\u6bb5\u8fd0\u884c\uff0c\u8fb9\u8fd0\u884c\u8fb9\u601d\u8003\uff0c\u6548\u679c\u6700\u4f73\uff01"]})]})}function a(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}},8453:(n,e,l)=>{l.d(e,{R:()=>s,x:()=>d});var t=l(6540);const r={},i=t.createContext(r);function s(n){const e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);